!function(){"use strict";angular.module("kioskUi",["ngAnimate","ngCookies","ngTouch","ngSanitize","restangular","ui.router","ui.bootstrap","firebase"])}(),function(){"use strict";function t(t,a){var e=new Firebase(a),i=t(e.child("products")),s={all:i};return s}angular.module("kioskUi").factory("Products",t),t.$inject=["$firebaseArray","FIREBASE_URL"]}(),function(){"use strict";function t(){return function(t,a){if(t){a.total=$.isArray(t)?t.length:Object.keys(t).length,a.totalPages=Math.ceil(a.total/a.itemsPerPage);var e=a.pageNumber*a.itemsPerPage,i=e+a.itemsPerPage,s=i>a.total?a.total:i;if(a.first=e+1,a.last=s,$.isArray(t))return t.slice(e,s);var l={},r=0;for(var n in t)++r,r>=e&&s>=r&&(l[n]=t[n]);return l}}}angular.module("kioskUi").filter("Paginate",t)}(),function(){"use strict";function t(){return{MAX_ITEMS_PER_PAGE:3,MIN_ITEMS_PER_PAGE:1,ITEMS_PER_PAGE_STEP:3,itemsPerPage:3,itemsSizeList:[],pagerObject:{},getItemSizeList:function(){return _.range(this.MIN_ITEMS_PER_PAGE,this.MAX_ITEMS_PER_PAGE+this.ITEMS_PER_PAGE_STEP,this.ITEMS_PER_PAGE_STEP)}}}angular.module("kioskUi").service("PageTracking",t)}(),function(){"use strict";function t(t,a){var e=new Firebase(a),i=t(e.child("categories")),s={all:i};return s}angular.module("kioskUi").factory("Category",t),t.$inject=["$firebaseArray","FIREBASE_URL"]}(),function(){"use strict";function t(){function t(t){this.totalQuantity+=1,this.subtotal+=parseFloat(t.price);var a=t.taxable*parseFloat(t.price)*.0825;this.totalTax+=a,this.total+=parseFloat(t.price)+a,t.id in this.items?(++this.items[t.id].qty,this.items[t.id].total+=parseFloat(t.price)+a):(t.qty=1,t.total=parseFloat(t.price)+a,this.items[t.id]=t)}function a(t){if(t.id in this.items&&this.items[t.id].qty>0){var a=t.taxable*parseFloat(t.price)*.0825;this.totalTax-=a,this.subtotal-=parseFloat(t.price),this.total-=parseFloat(t.price)+a,this.items[t.id].total-=parseFloat(t.price)+a,--this.items[t.id].qty,--this.totalQuantity}}var e={addToCart:t,removeFromCart:a,items:{},totalQuantity:0,total:0,totalTax:0,subtotal:0};return e}angular.module("kioskUi").factory("Cart",t)}(),function(){"use strict";function t(t,a,e,i){var s=this;e.pagerObject=s.pager;var l={itemsPerPage:e.itemsPerPage,pageNumber:0,total:0};s.pager=l;var r={category:"entree"};s.productFilter=r,s.changeProduct=function(t){console.log("change called"),s.details=t},s.addToCart=function(t){i.addToCart(t)},s.cart=i,s.details="",s.products=t.all,s.categories=a.all,s.slide_open=!1,s.toggleDetails=function(){0==s.slide_open?($(".slide-pane").animate({width:"100%"}),s.slide_open=!0):($(".slide-pane").animate({width:"0%"}),s.slide_open=!1)}}angular.module("kioskUi").controller("catalogController",t),t.$inject=["Products","Category","PageTracking","Cart"]}(),function(){"use strict";function t(t,a){var e=this;a.pagerObject=e.pager;var i={itemsPerPage:7,pageNumber:0,total:0};e.pager=i,e.cart=t,e.addToCart=function(a){console.log("add to cart called in controller"),t.addToCart(a)},e.removeFromCart=function(a){t.removeFromCart(a)},e.saveCart=function(){alert("this is a demo only, so checkout is disabled!")}}angular.module("kioskUi").controller("CartController",t),t.$inject=["Cart","PageTracking"]}(),function(){"use strict";function t(t){t.debug("runBlock end")}angular.module("kioskUi").run(t),t.$inject=["$log"]}(),function(){"use strict";function t(t,a){t.state("home",{url:"/",templateUrl:"app/catalog/catalog.html",controller:"catalogController",controllerAs:"vm"}).state("catalog",{url:"/catalog",templateUrl:"app/catalog/catalog.html",controller:"catalogController",controllerAs:"vm"}).state("cart",{url:"/cart",templateUrl:"app/cart/cart.html",controller:"CartController",controllerAs:"vm"}),a.otherwise("/")}angular.module("kioskUi").config(t),t.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";angular.module("kioskUi").constant("malarkey",malarkey).constant("toastr",toastr).constant("moment",moment).constant("FIREBASE_URL","https://zed-kiosk.firebaseio.com/")}(),function(){"use strict";function t(t,a){t.debugEnabled(!0),a.options.timeOut=3e3,a.options.positionClass="toast-top-right",a.options.preventDuplicates=!0,a.options.progressBar=!0}angular.module("kioskUi").config(t),t.$inject=["$logProvider","toastr"]}(),angular.module("kioskUi").run(["$templateCache",function(t){t.put("app/cart/cart.html",'<div id="navi-btn-container-left" ng-click="vm.pager.pageNumber = (vm.pager.pageNumber - 1)" ng-hide="vm.pager.pageNumber == 0"><button class="btn btn-warning navi-btn kiosk-btn"><i class="icon-angle-left"></i></button></div><div id="navi-btn-container-right" ng-click="vm.pager.pageNumber= (vm.pager.pageNumber + 1)" ng-hide="vm.pager.pageNumber == vm.pager.totalPages - 1 || vm.pager.total == 0"><button class="btn btn-warning navi-btn kiosk-btn"><i class="icon-angle-right"></i></button></div><input type="hidden" id="customer_id"><div class="container-fluid" style="height: 95%;"><div class="row main-content"><div class="padded"><div class="col-xs-12" id="view-cart"><div class="alert alert-success" style="margin-top: 10px;">We will deliver your order <span style="color: #B94A48;">at 11am Tomorrow</span> at the Kiosk refrigerator, please have your ID with you in order to unlock the case! Thank you!!</div><div class="row"><div class="col-xs-12"><table class="table table-striped"><thead><tr><th>Name</th><th style="text-align: center;">Size</th><th colspan="3" style="text-align: center;">Quantity</th><th style="text-align: center;">Price</th><th style="text-align: center;">Tax</th><th style="text-align: center;">Total</th></tr></thead><tbody id="cartBody"><tr ng-repeat="item in vm.cart.items | Paginate: vm.pager"><td>{{item.name}}</td><td style="text-align: center">{{item.size}}</td><td><input style="width: 50px; display: inline;" class="btn btn-block btn-primary kiosk-btn ng-binding" type="button" ng-click="vm.removeFromCart(item)" value="-"></td><td>{{item.qty}}</td><td><input style="width: 50px; display: inline;" class="btn btn-block btn-primary kiosk-btn ng-binding" type="button" ng-click="vm.addToCart(item)" value="+"></td><td style="text-align: center">{{item.price | currency}}</td><td style="text-align: center">{{item.taxable * item.qty * item.price * 0.08125 | currency}}</td><td style="text-align: center">{{item.total | currency}}</td></tr></tbody><tbody><tr><td colspan="3">&nbsp;</td><td>{{vm.cart.totalQuantity}}</td><td>&nbsp;</td><td style="text-align: center">{{vm.cart.subtotal | currency }}</td><td style="text-align: center">{{vm.cart.totalTax | currency}}</td><td style="text-align: center">{{vm.cart.total | currency}}</td></tr></tbody></table></div></div><div class="row padded cart-footer"><div class="col-xs-2"><a class="btn btn-large btn-primary kiosk-btn" href="#/catalog">Keep Shopping</a></div><div class="col-xs-4"><a class="btn btn-large kiosk-btn" href="#">Logout</a></div><div class="col-xs-3 col-xs-offset-2"><a class="btn btn-block btn-warning action-btn" ng-click="vm.saveCart()" ng-disabled="vm.cart.totalQuantity == 0"><i class="fa fa-shopping-cart fa-lg"></i> Checkout</a></div></div></div></div></div></div>'),t.put("app/catalog/catalog.html",'<div class="container-fluid"><div id="navi-btn-container-left" ng-click="vm.pager.pageNumber = (vm.pager.pageNumber - 1)" ng-hide="vm.pager.pageNumber == 0"><button class="btn btn-warning navi-btn kiosk-btn"><i class="fa fa-angle-left"></i></button></div><div id="navi-btn-container-right" ng-click="vm.pager.pageNumber= (vm.pager.pageNumber + 1)" ng-hide="vm.pager.pageNumber == vm.pager.totalPages - 1 || vm.pager.total == 0"><button class="btn btn-warning navi-btn kiosk-btn"><i class="fa fa-angle-right"></i></button></div><div class="row"><div class="col-xs-12 header"><div class="padded"><div class="col-xs-2" ng-repeat="category in vm.categories"><button class="btn btn-warning btn-block kiosk-btn" ng-model="vm.productFilter.category" ng-click="vm.productFilter.category=category.value; vm.pager.pageNumber=0">{{category.display_name}}</button></div></div></div></div></div><div class="container-fluid catalog-container"><div class="row"><div class="padded" id="catalog-products" ng-repeat="product in vm.products | filter: vm.productFilter | Paginate: vm.pager"><div class="col-xs-4 product-outer-container"><div class="thumbnail product-container padded"><div class="title centered"><h4>{{product.name}}</h4></div><img ng-src="http://placehold.it/300x200"><h4 class="centered">Starting from: ${{product.starting_price}}</h4><span class="symbols"><i ng-show="product.gluten_free" class="symbol-gluten-free"></i> <i ng-show="product.paleo" class="symbol-paleo"></i> <i ng-show="product.low_carb" class="symbol-low-carb"></i> <i ng-show="product.vegetarian" class="symbol-vegetarian"></i> &nbsp;</span><div><table class="table product-information"><thead><th>Size</th><th>Calories</th><th>Price</th></thead><tbody><tr ng-repeat="size in product.sizes" id="product_row_{{size.id}}" ng-click="vm.addToCart({\'id\': size.id, \'size\': size.sizeDisp, \'name\': product.name, \'price\': size.rack_price, \'taxable\': product.taxable})"><td>{{size.sizeDisp}}</td><td>{{size.calories}}</td><td><button class="btn btn-block btn-primary kiosk-btn"><i class="fa fa-plus fa-lg"></i> &nbsp;&nbsp;${{size.rack_price}}</button></td></tr></tbody></table><p><button ng-click="vm.changeProduct(product); vm.toggleDetails();" class="btn kiosk-btn btn-block loadDetails">View Details <i class="fa fa-double-angle-right"></i></button></p></div></div></div></div></div></div><div class="row"><div class="col-xs-12 footer"><div class="padded"><div class="col-xs-3"></div><div class="col-xs-2"><a class="btn btn-block action-btn btn-warning" href="#" id="logout-btn">Logout</a></div><div class="col-xs-2 number-items-display"># Items: {{vm.cart.totalQuantity}}</div><div class="col-xs-2 number-items-display">Total: <span id="grand-total">{{vm.cart.subtotal | currency}}</span></div><div class="col-xs-2"><a href="{{vm.cart.totalQuantity == 0 ? \'\' : \'#/cart\'}}" class="btn btn-block btn-warning action-btn" id="view-cart-btn" ng-disabled="vm.cart.totalQuantity == 0"><i class="fa fa-shopping-cart"></i> Checkout</a></div></div></div></div><div class="slide-pane" id="productDetails"><div class="container-fluid"><div class="row"><div class="product-full-details"><div class="col-xs-12"><div class="row"><div class="col-xs-12 product-full"><div class="col-xs-6"><div class="row"><div class="col-xs-12"><h4>{{vm.details.name}}</h4></div></div><div class="row"><div class="col-xs-12" id="product_image_full"><img ng-src="http://placehold.it/500x460"></div></div><div class="row" id="description"><div class="col-xs-12"><span class="symbols"><i ng-show="details.gluten_free" class="symbol-gluten-free"></i> <i ng-show="details.paleo" class="symbol-paleo"></i> <i ng-show="details.low_carb" class="symbol-low-carb"></i> <i ng-show="details.vegetarian" class="symbol-vegetarian"></i></span><p class="muted" id="product_description"><em><small>{{vm.details.description}}</small></em></p></div></div></div><div class="col-xs-6"><div class="row"><div class="col-xs-12"><table class="table well"><thead><th>Size</th><th>Price</th></thead><tbody><tr ng-repeat="size in vm.details.sizes" id="product_row_{{size.id}}" ng-click="vm.addToCart({\'id\': size.id, \'size\': size.sizeDisp, \'name\': product.name, \'price\': size.rack_price, \'taxable\': product.taxable})"><td class="vertically-centered">{{size.sizeDisp}}</td><td class="vertically-centered"><button class="btn btn-block btn-primary kiosk-btn"><i class="fa fa-plus fa-lg"></i> {{size.rack_price|currency}}</button></td></tr></tbody></table><div class="row"><div class="col-xs-6"><table class="table"><thead><th>Size</th><th>Calories</th><th>Carbs</th><th>Protein</th><th>Fat</th></thead><tbody><tr ng-repeat="size in vm.details.sizes"><td>{{size.sizeDisp}}</td><td>{{size.calories}}</td><td>{{size.carbs}}</td><td>{{size.protein}}</td><td>{{size.fat}}</td></tr></tbody></table></div><div class="col-xs-6"><p class="muted"><small>Ingredients: {{vm.details.ingredients}}</small></p></div></div><div class="row"><div class="col-xs-12"><table class="table"><thead><tr><th colspan="2">Symbol Legend</th></tr></thead><tbody><tr><td><i class="symbol-gluten-free"></i></td><td>Gluten-Free</td></tr><tr><td><i class="symbol-low-carb"></i></td><td>Low-Carb</td></tr><tr><td><i class="symbol-paleo"></i></td><td>Paleo Friendly</td></tr></tbody></table></div></div></div></div></div></div></div></div></div></div><button class="btn btn-primary navi-btn kiosk-btn" id="slide-close" ng-click="vm.toggleDetails()"><i class="fa fa-angle-right"></i></button></div></div>')}]);